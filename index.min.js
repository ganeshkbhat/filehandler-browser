"use strict";var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var n,t=1,r=arguments.length;r>t;t++){n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},__assign.apply(this,arguments)},__awaiter=this&&this.__awaiter||function(e,n,t,r){function i(e){return e instanceof t?e:new t(function(n){n(e)})}return new(t||(t=Promise))(function(t,a){function o(e){try{s(r.next(e))}catch(n){a(n)}}function u(e){try{s(r["throw"](e))}catch(n){a(n)}}function s(e){e.done?t(e.value):i(e.value).then(o,u)}s((r=r.apply(e,n||[])).next())})},__generator=this&&this.__generator||function(e,n){function t(e){return function(n){return r([e,n])}}function r(t){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,t[0]&&(s=0)),s;)try{if(i=1,a&&(o=2&t[0]?a["return"]:t[0]?a["throw"]||((o=a["return"])&&o.call(a),0):a.next)&&!(o=o.call(a,t[1])).done)return o;switch(a=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,a=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){s.label=t[1];break}if(6===t[0]&&s.label<o[1]){s.label=o[1],o=t;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(t);break}o[2]&&s.ops.pop(),s.trys.pop();continue}t=n.call(e,s)}catch(r){t=[6,r],a=0}finally{i=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var i,a,o,u,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:t(0),"throw":t(1),"return":t(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u},FileHandlerStaticInterface=function(){function e(){}return e}(),FileHandlerStatic=function(){function e(){}return e.readFileStreaming=function(e,n){return new Promise(function(e,n){})},e.writeFileStreaming=function(e,n,t){var r=this;return new Promise(function(e,n){return __awaiter(r,void 0,void 0,function(){return __generator(this,function(e){return[2]})})})},e}(),FileHandler=function(){function e(e,n){this.filePath=e,this.encoding=n||"UTF8"}return e.prototype.verifyPermission=function(e,n){var t=this;return new Promise(function(r,i){return __awaiter(t,void 0,void 0,function(){var t;return __generator(this,function(a){switch(a.label){case 0:return t={},n&&(t.mode="readwrite"),[4,e.queryPermission(t)];case 1:return"granted"===a.sent()&&r(!0),[4,e.requestPermission(t)];case 2:return"granted"===a.sent()&&r(!0),i(!1),[2]}})})})},e.prototype.readFileStreaming=function(e){var n=this;return void 0===e&&(e={}),new Promise(function(t,r){return __awaiter(n,void 0,void 0,function(){var n,i,a;return __generator(this,function(o){switch(o.label){case 0:return[4,window.showOpenFilePicker(e)];case 1:return n=o.sent()[0],"file"!==n.kind?[3,4]:[4,n];case 2:return i=o.sent(),[4,n.getFile()];case 3:return a=o.sent(),t(a),[3,5];case 4:"directory"===n.kind&&r(!1),o.label=5;case 5:return[2]}})})})},e.prototype.writeFileStreaming=function(e,n){var t=this;return void 0===n&&(n={}),new Promise(function(r,i){return __awaiter(t,void 0,void 0,function(){var t,a,o;return __generator(this,function(u){switch(u.label){case 0:return u.trys.push([0,5,,6]),[4,window.showSaveFilePicker()];case 1:return t=u.sent(),[4,t.createWritable()];case 2:return a=u.sent(),[4,a.write(__assign(__assign({type:"write",position:0},n),{data:e}))];case 3:return u.sent(),[4,a.close()];case 4:return u.sent(),r(!0),[3,6];case 5:return o=u.sent(),i(o),[3,6];case 6:return[2]}})})})},e}();
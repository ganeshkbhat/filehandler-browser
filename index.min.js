"use strict";var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;r>n;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},__assign.apply(this,arguments)},__awaiter=this&&this.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,a){function o(e){try{u(r.next(e))}catch(t){a(t)}}function s(e){try{u(r["throw"](e))}catch(t){a(t)}}function u(e){e.done?n(e.value):i(e.value).then(o,s)}u((r=r.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,n[0]&&(u=0)),u;)try{if(i=1,a&&(o=2&n[0]?a["return"]:n[0]?a["throw"]||((o=a["return"])&&o.call(a),0):a.next)&&!(o=o.call(a,n[1])).done)return o;switch(a=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,a=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){u.label=n[1];break}if(6===n[0]&&u.label<o[1]){u.label=o[1],o=n;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(n);break}o[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(r){n=[6,r],a=0}finally{i=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,a,o,s,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(exports,"__esModule",{value:!0});var FileHandlerStatic=function(){function e(){}return e.prototype.readFileStreaming=function(e,t){return new Promise(function(e,t){})},e.prototype.writeFileStreaming=function(e,t,n){var r=this;return new Promise(function(e,t){return __awaiter(r,void 0,void 0,function(){return __generator(this,function(e){return[2]})})})},e}(),FileHandler=function(){function e(e,t){this.filePath=e,this.encoding=t||"UTF8"}return e.prototype.verifyPermission=function(e,t){var n=this;return new Promise(function(r,i){return __awaiter(n,void 0,void 0,function(){var n;return __generator(this,function(a){switch(a.label){case 0:return n={},t&&(n.mode="readwrite"),[4,e.queryPermission(n)];case 1:return"granted"===a.sent()&&r(!0),[4,e.requestPermission(n)];case 2:return"granted"===a.sent()&&r(!0),i(!1),[2]}})})})},e.prototype.readFileStreaming=function(e){var t=this;return void 0===e&&(e={}),new Promise(function(n,r){return __awaiter(t,void 0,void 0,function(){var t,i,a;return __generator(this,function(o){switch(o.label){case 0:return[4,window.showOpenFilePicker(e)];case 1:return t=o.sent()[0],"file"!==t.kind?[3,4]:[4,t];case 2:return i=o.sent(),[4,t.getFile()];case 3:return a=o.sent(),n(a),[3,5];case 4:"directory"===t.kind&&r(!1),o.label=5;case 5:return[2]}})})})},e.prototype.writeFileStreaming=function(e,t){var n=this;return void 0===t&&(t={}),new Promise(function(r,i){return __awaiter(n,void 0,void 0,function(){var n,a,o;return __generator(this,function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),[4,window.showSaveFilePicker()];case 1:return n=s.sent(),[4,n.createWritable()];case 2:return a=s.sent(),[4,a.write(__assign(__assign({type:"write",position:0},t),{data:e}))];case 3:return s.sent(),[4,a.close()];case 4:return s.sent(),r(!0),[3,6];case 5:return o=s.sent(),i(o),[3,6];case 6:return[2]}})})})},e}();exports["default"]={FileHandler:FileHandler,FileHandlerStatic:FileHandlerStatic};